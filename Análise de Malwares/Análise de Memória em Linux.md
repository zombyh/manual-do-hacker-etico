
## ğŸ“˜ Resumo: AnÃ¡lise de MemÃ³ria em Linux

### ğŸ¯ Objetivo da Aula
- Identificar tÃ©cnicas de aquisiÃ§Ã£o de memÃ³ria em Linux.
- Construir perfis do sistema operacional Linux para uso no Volatility.
- Reconhecer recursos internos do ambiente Linux para anÃ¡lise forense.

---

## ğŸ§  TÃ³picos Principais

### 1. IntroduÃ§Ã£o ao Linux e Sua ImportÃ¢ncia Forense
- Linux Ã© um sistema baseado em UNIX, de cÃ³digo aberto e gratuito.
- Diferente do Windows, exige a criaÃ§Ã£o de perfis especÃ­ficos para anÃ¡lise com o Volatility.

---

### 2. AquisiÃ§Ã£o de MemÃ³ria no Linux

#### ğŸ“Œ MÃ©todos Antigos
- Uso de `/dev/mem` e `/dev/kmem` para leitura direta da memÃ³ria fÃ­sica.
- **Problema**: Desativados em sistemas modernos por questÃµes de seguranÃ§a.

#### ğŸ“Œ MÃ©todos Modernos
- **`fmem`**: Driver que cria o dispositivo `/dev/fmem` para acesso Ã  memÃ³ria fÃ­sica.
  - âœ… Vantagens: Acessa memÃ³ria acima de 896 MB; evita leitura de Ã¡reas nÃ£o mapeadas.
  - âŒ Desvantagem: Exige anÃ¡lise manual de `/proc/iomem` para identificar segmentos de RAM.

- **LIME (Linux Memory Extractor)**:
  - âœ… Faz aquisiÃ§Ã£o diretamente no kernel.
  - âœ… Detecta automaticamente os intervalos de memÃ³ria.
  - âœ… Suporta saÃ­da em formato **raw**, **padded** ou **lime** (recomendado).
  - âœ… Pode salvar localmente ou enviar via rede.

**Exemplo de uso do LIME:**
```bash
# Salvar localmente
insmod lime.ko "path=/tmp/memoria.lime format=lime"

# Enviar via rede
insmod lime.ko "path=tcp:443 format=lime"
nc <IP_ALVO> 443 > memoria.lime
```

---

### 3. CriaÃ§Ã£o de Perfis Linux para o Volatility

#### Por que criar perfis?
- Linux possui milhares de versÃµes de kernel personalizadas.
- Volatility nÃ£o inclui todos os perfis possÃ­veis.

#### ğŸ“Œ Ferramentas NecessÃ¡rias:
- `dwarfdump`
- `gcc`, `make` (pacote `build-essential`)
- CabeÃ§alhos do kernel (`linux-headers-$(uname -r)`)

#### ğŸ“Œ Passos para Criar um Perfil:
1. Compilar `module.c` do Volatility:
   ```bash
   cd /usr/share/volatility/tools/linux
   make
   ```
2. Gerar `module.dwarf` com `dwarfdump`.
3. Obter `System.map` do diretÃ³rio `/boot`.
4. Compactar ambos em um arquivo ZIP e mover para:
   ```
   volatility/plugins/overlays/linux/
   ```
5. Verificar com:
   ```bash
   volatility --info | grep "NomeDoPerfil"
   ```

---

### 4. AnÃ¡lise de Processos e MemÃ³ria

#### ğŸ“Œ Estrutura de Processos no Linux
- Cada processo Ã© representado por uma estrutura no kernel.
- Lista de processos ativos nÃ£o Ã© visÃ­vel ao usuÃ¡rio.
- **Plugin do Volatility**: `linux_pslist`

#### ğŸ“Œ Objetivos do Analista:
- Classificar a memÃ³ria do processo (heap, stack, cÃ³digo).
- Extrair argumentos da linha de comando.
- Analisar variÃ¡veis de ambiente.
- Detectar injeÃ§Ã£o de bibliotecas compartilhadas.

---

### 5. AnÃ¡lise de Rede

#### ğŸ“Œ Plugin: `linux_netstat`
- Recupera conexÃµes de rede a partir da memÃ³ria.
- Similar ao `netstat`, mas sem usar APIs do sistema.

#### ğŸ“Œ Objetivos:
- Recuperar informaÃ§Ãµes de conexÃ£o (IP, porta, estado).
- Detectar conexÃµes maliciosas (C2, exfiltraÃ§Ã£o).

---

### 6. Sistemas de Arquivos

#### ğŸ“Œ Plugin: `linux_mount`
- Lista sistemas de arquivos montados no momento da aquisiÃ§Ã£o.

#### ğŸ“Œ Objetivos:
- Identificar compartilhamentos de rede montados.
- Detectar vazamento de dados.
- Entender partiÃ§Ãµes e sistemas de arquivos temporÃ¡rios (ex.: `tmpfs`).

---

### 7. DetecÃ§Ã£o de Rootkits

#### ğŸ“Œ Tipos de Rootkits:
- **Modo UsuÃ¡rio**:
  - Mais portÃ¡teis, menos detectÃ¡veis.
- **Modo Kernel**:
  - Mais poderosos, mas mais difÃ­ceis de manter e mais visÃ­veis.

#### ğŸ“Œ TÃ©cnicas Maliciosas a Investigar:
- InjeÃ§Ã£o de shellcode.
- InjeÃ§Ã£o de bibliotecas compartilhadas.
- SobrescriÃ§Ã£o da GOT/PLT.
- Rastreamento de ligaÃ§Ãµes de funÃ§Ãµes em linha.

---

### 8. ExercÃ­cios de RevisÃ£o

1. **Dispositivo para aquisiÃ§Ã£o em sistemas 64-bit modernos:**
   - âœ… `/proc/score`

2. **Item NÃƒO necessÃ¡rio para criar um perfil Linux:**
   - âŒ `Dumpit`

3. **Item NÃƒO foco direto na anÃ¡lise de memÃ³ria para malwares:**
   - âŒ `Senhas de usuÃ¡rio`

---

### ğŸ“š ReferÃªncias Principais
- LIGH, M.H. et al. *The Art of Memory Forensics*.
- ANLEY, C. *The Shellcoder's Handbook*.
- TANENBAUM, A.S. *OrganizaÃ§Ã£o Estruturada de Computadores*.

---

### ğŸ§© PrÃ³ximos Temas
- RevisÃ£o de assembly ARM.
- AnÃ¡lise de malwares em Android e iOS.

---
