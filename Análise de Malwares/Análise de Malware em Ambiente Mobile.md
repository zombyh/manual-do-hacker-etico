
## 📘 Resumo: Análise de Malware em Ambiente Mobile

### 📌 Visão Geral
- Esta é a **Aula 10** do curso, com foco em análise de malware em dispositivos móveis (Android e iOS).
- Aborda a arquitetura ARM, peculiaridades dos sistemas Android e iOS, e técnicas de análise estática e dinâmica.

---

## 🧠 Arquitetura ARM

### 🔹 Diferenças entre CISC e RISC
- **CISC (Intel)**: Instruções complexas, múltiplas operações por instrução (ex: `mul`).
- **RISC (ARM)**: Instruções simples, uma operação por instrução, mais eficiente em energia e custo.

### 🔹 Características do ARM
- Arquitetura do tipo **load-store**.
- Dois tipos de instruções:
  1. **Acesso à memória**
  2. **Operações ALU** (aritméticas e lógicas)
- 30 registradores de 32 bits.
- Dois modos de instrução:
  - **ARM**: instruções de 32 bits
  - **Thumb**: instruções de 16 e 32 bits (mais condensadas)

---

## 🤖 Android

### 🔹 Estrutura do Sistema
- Baseado em Linux.
- **Hierarquia de arquivos**:
  - **Interno**: `/data/data/` (privado por app)
  - **Externo**: `/storage/emulated/0`, `/sdcard` (acessível a todos)

### 🔹 Segurança
- **SELinux**: Controle de Acesso Obrigatório (MAC).
- Cada app roda como um usuário Linux único.
- Permissões definidas no `manifest.xml`.

### 🔹 Root
- Permite acesso total ao sistema.
- Riscos: remoção de proteções de segurança.
- Malwares podem usar root para:
  - Acesso a dados críticos
  - Persistência
  - Ocultação

---

## 🔍 Análise de Malware no Android

### 🔸 Análise Estática
- **Ferramentas**:
  - `Baksmali`, `Apktool`, `oat2dex`, `vdexExtractor`
  - Descompiladores: `JADX`, `AndroChef`, `JEB`, `dex2jar`

### 🔸 Análise Dinâmica
- **Android Debug Bridge (ADB)**: cliente, daemon e servidor.
- **Emuladores**:
  - Android Emulator (oficial)
  - Genymotion, VMWare, QEMU

### 🔸 Fluxo de Análise
1. Aquisição da amostra (APK)
2. Descompilação/desmontagem
3. Análise do `manifest.xml`
4. Análise do código
5. Desofuscação/descriptografia
6. Análise comportamental
7. Depuração (com snapshots)

---

## 🍎 iOS (Apple)

### 🔹 Fundamentos
- Baseado em **Darwin** (kernel XNU).
- Linguagens: Objective-C e Swift.
- API: Cocoa (macOS) e Cocoa Touch (iOS).

### 🔹 Segurança
- **Cadeia de inicialização segura**:
  - Boot ROM → iBoot → Kernel
  - Modos: DFU e Recovery
- **Kernel Integrity Protection (KIP)**
- **Secure Enclave**: coprocessador seguro para chaves criptográficas
- **Proteção de Dados**: criptografia por arquivo com AES-256
- **Keychain**: armazenamento seguro de dados sensíveis

### 🔹 Certificados e Sandbox
- Todo código deve ser assinado pela Apple.
- Apps rodam em **sandbox** (contêineres).
- Não há escalonamento de privilégios nativo.

---

## 🔎 Análise de Malware no iOS

### 🔸 Análise Estática
- **Formatos**: DMG (macOS), IPA (iOS)
- **Ferramentas**:
  - IDA, Hopper, radare2, RetDec, Ghidra
  - Extração: 7-zip, iTunes, iMazing

### 🔸 Análise Dinâmica
- Geralmente requer **jailbreak** e **Cydia**.
- **Ferramentas**:
  - Theos, Cycript, Frida
  - Monitoramento: fsmon, filemon, rvictl (RVI)

### 🔸 Jailbreak
- Permite:
  - Remover restrições
  - Instalar apps não oficiais
  - Acessar sistema de arquivos
- Diferente de root: inclui desbloqueio do bootloader e instalação de apps não assinados.

---

## ✅ Questões de Revisão (Respostas)

1. **Arquitetura RISC vs CISC**  
   - ✅ Apenas III está correta.  
   - RISC é o conjunto de instruções da arquitetura ARM.

2. **Diretório acessível a todos no Android**  
   - ✅ `/sdcard/`

3. **Mecanismo de proteção do kernel no iOS**  
   - ✅ `KernelIntegrityProtection`

---

## 📚 Referências Sugeridas
- Anley (2007)  
- Dunham et al. (2014)  
- Kleymenov & Thabet (2019)  
- Ligh et al. (2014)  
- Tanenbaum (2010)

---

## 🧩 Sugestão de Estrutura no Obsidian
- Crie notas para:
  - `Arquitetura ARM`
  - `Android - Análise`
  - `iOS - Análise`
  - `Ferramentas de Análise`
  - `Conceitos de Segurança Mobile`
  - `Jailbreak vs Root`
- Use links entre notas para conectar conceitos (ex: `[[ARM]]` em `[[Android]]`).

---
